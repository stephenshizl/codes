#!/bin/bash
########################################################################
# File Name: screencap.sh
# Author: chengdong
# mail: zchengdongdong@gmail.com
# Created Time: Fri 05 Dec 2014 11:13:26 AM CST
########################################################################

ARMdir=/sdcard/adb_screencap
adb shell "mkdir -p ${ARMdir}"
adb shell "rm ${ARMdir}/*.png"

DATE=`date +"%Y%m%d-%H%M%S"`
for K in $( seq 1 $1 )
do
	echo adb shell screencap -p ${K}.png
	adb shell screencap -p ${ARMdir}/"scap"${K}.png
done

PCdir=/tmp/adb_screencat
mkdir -p $PCdir

for K in $( seq 1 $1 )
do
	echo adb pull ${ARMdir}/"scap"${K}.png $PCdir/${DATE}"-Scap"${K}.png
	adb pull ${ARMdir}/"scap"${K}.png $PCdir/${DATE}"-Scap"${K}.png
done
